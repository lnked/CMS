"use strict";var jscolor={dir:"/"+ADMIN_DIR+"/images/jscolor/",bindClass:"jscolor",binding:!0,preloading:!0,install:function(){this.init()},init:function(){jscolor.binding&&jscolor.bind(),jscolor.preloading&&jscolor.preload()},getDir:function(){if(!jscolor.dir){var e=jscolor.detectDir();jscolor.dir=!1!==e?e:"jscolor/"}return jscolor.dir},detectDir:function(){for(var e=location.href,t=document.getElementsByTagName("base"),i=0;i<t.length;i+=1)t[i].href&&(e=t[i].href);for(t=document.getElementsByTagName("script"),i=0;i<t.length;i+=1)if(t[i].src&&/(^|\/)jscolor\.js([?#].*)?$/i.test(t[i].src)){var o=new jscolor.URI(t[i].src).toAbsolute(e);return o.path=o.path.replace(/[^\/]+$/,""),o.query=null,o.fragment=null,o.toString()}return!1},bind:function(){for(var e=new RegExp("(^|\\s)("+jscolor.bindClass+")\\s*(\\{[^}]*\\})?","i"),t=document.getElementsByTagName("input"),i=0;i<t.length;i+=1){var o;if(!t[i].color&&t[i].className&&(o=t[i].className.match(e))){var n={};if(o[3])try{n=new Function("return ("+o[3]+")")()}catch(e){}t[i].color=new jscolor.color(t[i],n)}}},preload:function(){for(var e in jscolor.imgRequire)jscolor.imgRequire.hasOwnProperty(e)&&jscolor.loadImage(e)},images:{pad:[181,101],sld:[16,101],cross:[15,15],arrow:[7,11]},imgRequire:{},imgLoaded:{},requireImage:function(e){jscolor.imgRequire[e]=!0},loadImage:function(e){jscolor.imgLoaded[e]||(jscolor.imgLoaded[e]=new Image,jscolor.imgLoaded[e].src=jscolor.getDir()+e)},fetchElement:function(e){return"string"==typeof e?document.getElementById(e):e},addEvent:function(e,t,i){e.addEventListener?e.addEventListener(t,i,!1):e.attachEvent&&e.attachEvent("on"+t,i)},fireEvent:function(e,t){if(e)if(document.createEvent)(i=document.createEvent("HTMLEvents")).initEvent(t,!0,!0),e.dispatchEvent(i);else if(document.createEventObject){var i=document.createEventObject();e.fireEvent("on"+t,i)}else e["on"+t]&&e["on"+t]()},getElementPos:function(e){var t=e,i=e,o=0,n=0;if(t.offsetParent)for(;o+=t.offsetLeft,n+=t.offsetTop,t=t.offsetParent;);for(;(i=i.parentNode)&&"BODY"!==i.nodeName.toUpperCase();)o-=i.scrollLeft,n-=i.scrollTop;return[o,n]},getElementSize:function(e){return[e.offsetWidth,e.offsetHeight]},getRelMousePos:function(e){var t=0,i=0;return e||(e=window.event),"number"==typeof e.offsetX?(t=e.offsetX,i=e.offsetY):"number"==typeof e.layerX&&(t=e.layerX,i=e.layerY),{x:t,y:i}},getViewPos:function(){return"number"==typeof window.pageYOffset?[window.pageXOffset,window.pageYOffset]:document.body&&(document.body.scrollLeft||document.body.scrollTop)?[document.body.scrollLeft,document.body.scrollTop]:document.documentElement&&(document.documentElement.scrollLeft||document.documentElement.scrollTop)?[document.documentElement.scrollLeft,document.documentElement.scrollTop]:[0,0]},getViewSize:function(){return"number"==typeof window.innerWidth?[window.innerWidth,window.innerHeight]:document.body&&(document.body.clientWidth||document.body.clientHeight)?[document.body.clientWidth,document.body.clientHeight]:document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight)?[document.documentElement.clientWidth,document.documentElement.clientHeight]:[0,0]},URI:function(e){function o(e){for(var t="";e;)if("../"===e.substr(0,3)||"./"===e.substr(0,2))e=e.replace(/^\.+/,"").substr(1);else if("/./"===e.substr(0,3)||"/."===e)e="/"+e.substr(3);else if("/../"===e.substr(0,4)||"/.."===e)e="/"+e.substr(4),t=t.replace(/\/?[^\/]*$/,"");else if("."===e||".."===e)e="";else{var i=e.match(/^\/?[^\/]*/)[0];e=e.substr(i.length),t+=i}return t}this.scheme=null,this.authority=null,this.path="",this.query=null,this.fragment=null,this.parse=function(e){var t=e.match(/^(([A-Za-z][0-9A-Za-z+.-]*)(:))?((\/\/)([^\/?#]*))?([^?#]*)((\?)([^#]*))?((#)(.*))?/);return this.scheme=t[3]?t[2]:null,this.authority=t[5]?t[6]:null,this.path=t[7],this.query=t[9]?t[10]:null,this.fragment=t[12]?t[13]:null,this},this.toString=function(){var e="";return null!==this.scheme&&(e=e+this.scheme+":"),null!==this.authority&&(e=e+"//"+this.authority),null!==this.path&&(e+=this.path),null!==this.query&&(e=e+"?"+this.query),null!==this.fragment&&(e=e+"#"+this.fragment),e},this.toAbsolute=function(e){e=new jscolor.URI(e);var t=this,i=new jscolor.URI;return null!==e.scheme&&(null!==t.scheme&&t.scheme.toLowerCase()===e.scheme.toLowerCase()&&(t.scheme=null),null!==t.scheme?(i.scheme=t.scheme,i.authority=t.authority,i.path=o(t.path),i.query=t.query):(null!==t.authority?(i.authority=t.authority,i.path=o(t.path),i.query=t.query):(""===t.path?(i.path=e.path,null!==t.query?i.query=t.query:i.query=e.query):("/"===t.path.substr(0,1)?i.path=o(t.path):(null!==e.authority&&""===e.path?i.path="/"+t.path:i.path=e.path.replace(/[^\/]+$/,"")+t.path,i.path=o(i.path)),i.query=t.query),i.authority=e.authority),i.scheme=e.scheme),i.fragment=t.fragment,i)},e&&this.parse(e)},color:function(c,e){for(var t in this.required=!0,this.adjust=!0,this.hash=!1,this.caps=!0,this.slider=!0,this.valueElement=c,this.styleElement=c,this.onImmediateChange=null,this.hsv=[0,0,1],this.rgb=[1,1,1],this.minH=0,this.maxH=6,this.minS=0,this.maxS=1,this.minV=0,this.maxV=1,this.pickerOnfocus=!0,this.pickerMode="HSV",this.pickerPosition="bottom",this.pickerSmartPosition=!0,this.pickerButtonHeight=20,this.pickerClosable=!1,this.pickerCloseText="Close",this.pickerButtonColor="ButtonText",this.pickerFace=10,this.pickerFaceColor="ThreeDFace",this.pickerBorder=1,this.pickerBorderColor="ThreeDHighlight ThreeDShadow ThreeDShadow ThreeDHighlight",this.pickerInset=1,this.pickerInsetColor="ThreeDShadow ThreeDHighlight ThreeDHighlight ThreeDShadow",this.pickerZIndex=1e4,e)e.hasOwnProperty(t)&&(this[t]=e[t]);function d(e,t,i){if(null===e)return[i,i,i];var o=Math.floor(e),n=i*(1-t),r=i*(1-t*(o%2?e-o:1-(e-o)));switch(o){case 6:case 0:return[i,r,n];case 1:return[r,i,n];case 2:return[n,i,r];case 3:return[n,r,i];case 4:return[r,n,i];case 5:return[i,n,r]}}function u(e){return[2*e.pickerInset+2*e.pickerFace+jscolor.images.pad[0]+(e.slider?2*e.pickerInset+2*jscolor.images.arrow[0]+jscolor.images.sld[0]:0),e.pickerClosable?4*e.pickerInset+3*e.pickerFace+jscolor.images.pad[1]+e.pickerButtonHeight:2*e.pickerInset+2*e.pickerFace+jscolor.images.pad[1]]}function p(){switch(b){case 0:var e=1;break;case 1:e=2}var t=Math.round(v.hsv[0]/6*(jscolor.images.pad[0]-1)),i=Math.round((1-v.hsv[e])*(jscolor.images.pad[1]-1));jscolor.picker.padM.style.backgroundPosition=v.pickerFace+v.pickerInset+t-Math.floor(jscolor.images.cross[0]/2)+"px "+(v.pickerFace+v.pickerInset+i-Math.floor(jscolor.images.cross[1]/2))+"px";var o=jscolor.picker.sld.childNodes;switch(b){case 0:for(var n=d(v.hsv[0],v.hsv[1],1),r=0;r<o.length;r+=1)o[r].style.backgroundColor="rgb("+n[0]*(1-r/o.length)*100+"%,"+n[1]*(1-r/o.length)*100+"%,"+n[2]*(1-r/o.length)*100+"%)";break;case 1:var s,a=[v.hsv[2],0,0],l=(r=Math.floor(v.hsv[0]))%2?v.hsv[0]-r:1-(v.hsv[0]-r);switch(r){case 6:case 0:n=[0,1,2];break;case 1:n=[1,0,2];break;case 2:n=[2,0,1];break;case 3:n=[2,1,0];break;case 4:n=[1,2,0];break;case 5:n=[0,2,1]}for(r=0;r<o.length;r+=1)s=1-1/(o.length-1)*r,a[1]=a[0]*(1-s*l),a[2]=a[0]*(1-s),o[r].style.backgroundColor="rgb("+100*a[n[0]]+"%,"+100*a[n[1]]+"%,"+100*a[n[2]]+"%)"}}function h(){switch(b){case 0:var e=2;break;case 1:e=1}var t=Math.round((1-v.hsv[e])*(jscolor.images.sld[1]-1));jscolor.picker.sldM.style.backgroundPosition="0 "+(v.pickerFace+v.pickerInset+t-Math.floor(jscolor.images.arrow[1]/2))+"px"}function f(){return jscolor.picker&&jscolor.picker.owner===v}function m(e){var t=jscolor.getRelMousePos(e),i=t.x-v.pickerFace-v.pickerInset,o=t.y-v.pickerFace-v.pickerInset;switch(b){case 0:v.fromHSV(i*(6/(jscolor.images.pad[0]-1)),1-o/(jscolor.images.pad[1]-1),null,s);break;case 1:v.fromHSV(i*(6/(jscolor.images.pad[0]-1)),null,1-o/(jscolor.images.pad[1]-1),s)}}function g(e){var t=jscolor.getRelMousePos(e).y-v.pickerFace-v.pickerInset;switch(b){case 0:v.fromHSV(null,null,1-t/(jscolor.images.sld[1]-1),r);break;case 1:v.fromHSV(null,1-t/(jscolor.images.sld[1]-1),null,r)}}function _(){v.onImmediateChange&&("string"==typeof v.onImmediateChange?new Function(v.onImmediateChange):v.onImmediateChange).call(v)}this.hidePicker=function(){f()&&(jscolor.picker.owner.styleElement.parentNode.removeChild(jscolor.picker.boxB),delete jscolor.picker.owner)},this.showPicker=function(){if(!f()){var e,t,i,o=jscolor.getElementPos(c),n=jscolor.getElementSize(c),r=jscolor.getViewPos(),s=jscolor.getViewSize(),a=u(this);switch(this.pickerPosition.toLowerCase()){case"left":t=0,i=-(e=1);break;case"right":t=0,i=e=1;break;case"top":e=0,i=-(t=1);break;default:e=0,i=t=1}var l=(n[t]+a[t])/2;if(this.pickerSmartPosition)d=[-r[e]+o[e]+a[e]>s[e]&&-r[e]+o[e]+n[e]/2>s[e]/2&&0<=o[e]+n[e]-a[e]?o[e]+n[e]-a[e]:o[e],-r[t]+o[t]+n[t]+a[t]-l+l*i>s[t]?-r[t]+o[t]+n[t]/2>s[t]/2&&0<=o[t]+n[t]-l-l*i?o[t]+n[t]-l-l*i:o[t]+n[t]-l+l*i:0<=o[t]+n[t]-l+l*i?o[t]+n[t]-l+l*i:o[t]+n[t]-l-l*i];else var d=[o[e],o[t]+n[t]-l+l*i];!function(e,t){if(!jscolor.picker){jscolor.picker={box:document.createElement("div"),boxB:document.createElement("div"),pad:document.createElement("div"),padB:document.createElement("div"),padM:document.createElement("div"),sld:document.createElement("div"),sldB:document.createElement("div"),sldM:document.createElement("div"),btn:document.createElement("div"),btnS:document.createElement("span"),btnT:document.createTextNode(v.pickerCloseText)};for(var i=0;i<jscolor.images.sld[1];i+=4){var o=document.createElement("div");o.style.height="4px",o.style.fontSize="1px",o.style.lineHeight="0",jscolor.picker.sld.appendChild(o)}jscolor.picker.sldB.appendChild(jscolor.picker.sld),jscolor.picker.box.appendChild(jscolor.picker.sldB),jscolor.picker.box.appendChild(jscolor.picker.sldM),jscolor.picker.padB.appendChild(jscolor.picker.pad),jscolor.picker.box.appendChild(jscolor.picker.padB),jscolor.picker.box.appendChild(jscolor.picker.padM),jscolor.picker.btnS.appendChild(jscolor.picker.btnT),jscolor.picker.btn.appendChild(jscolor.picker.btnS),jscolor.picker.box.appendChild(jscolor.picker.btn),jscolor.picker.boxB.appendChild(jscolor.picker.box)}var n=jscolor.picker;if(n.box.onmouseup=n.box.onmouseout=function(){c.focus()},n.box.onmousedown=function(){y=!0},n.box.onmousemove=function(e){(w||x)&&(w&&m(e),x&&g(e),document.selection?document.selection.empty():window.getSelection&&window.getSelection().removeAllRanges(),_())},"ontouchstart"in window){var r=function(e){var t={offsetX:e.touches[0].pageX-C.X,offsetY:e.touches[0].pageY-C.Y};(w||x)&&(w&&m(t),x&&g(t),_()),e.stopPropagation(),e.preventDefault()};n.box.removeEventListener("touchmove",r,!1),n.box.addEventListener("touchmove",r,!1)}n.padM.onmouseup=n.padM.onmouseout=function(){w&&(w=!1,jscolor.fireEvent(k,"change"))},n.padM.onmousedown=function(e){switch(b){case 0:0===v.hsv[2]&&v.fromHSV(null,null,1);break;case 1:0===v.hsv[1]&&v.fromHSV(null,1,null)}w=!(x=!1),m(e),_()},"ontouchstart"in window&&n.padM.addEventListener("touchstart",function(e){C={X:e.target.offsetParent.offsetLeft,Y:e.target.offsetParent.offsetTop},this.onmousedown({offsetX:e.touches[0].pageX-C.X,offsetY:e.touches[0].pageY-C.Y})});n.sldM.onmouseup=n.sldM.onmouseout=function(){x&&(x=!1,jscolor.fireEvent(k,"change"))},n.sldM.onmousedown=function(e){x=!(w=!1),g(e),_()},"ontouchstart"in window&&n.sldM.addEventListener("touchstart",function(e){C={X:e.target.offsetParent.offsetLeft,Y:e.target.offsetParent.offsetTop},this.onmousedown({offsetX:e.touches[0].pageX-C.X,offsetY:e.touches[0].pageY-C.Y})});var s=u(v);n.box.style.width=s[0]+"px",n.box.style.height=s[1]+"px",n.boxB.style.position="absolute",n.boxB.style.clear="both",n.boxB.style.left="0px",n.boxB.style.top="100%",n.boxB.style.marginTop="2px",n.boxB.style.zIndex=v.pickerZIndex,n.boxB.style.border=v.pickerBorder+"px solid",n.boxB.style.borderColor=v.pickerBorderColor,n.boxB.style.background=v.pickerFaceColor,n.pad.style.width=jscolor.images.pad[0]+"px",n.pad.style.height=jscolor.images.pad[1]+"px",n.padB.style.position="absolute",n.padB.style.left=v.pickerFace+"px",n.padB.style.top="10px",n.padB.style.border=v.pickerInset+"px solid",n.padB.style.borderColor=v.pickerInsetColor,n.padM.style.position="absolute",n.padM.style.left="0",n.padM.style.top="0",n.padM.style.width=v.pickerFace+2*v.pickerInset+jscolor.images.pad[0]+jscolor.images.arrow[0]+"px",n.padM.style.height=n.box.style.height,n.padM.style.cursor="crosshair",n.sld.style.overflow="hidden",n.sld.style.width=jscolor.images.sld[0]+"px",n.sld.style.height=jscolor.images.sld[1]+"px",n.sldB.style.display=v.slider?"block":"none",n.sldB.style.position="absolute",n.sldB.style.right=v.pickerFace+"px",n.sldB.style.top=v.pickerFace+"px",n.sldB.style.border=v.pickerInset+"px solid",n.sldB.style.borderColor=v.pickerInsetColor,n.sldM.style.display=v.slider?"block":"none",n.sldM.style.position="absolute",n.sldM.style.right="0",n.sldM.style.top="0",n.sldM.style.width=jscolor.images.sld[0]+jscolor.images.arrow[0]+v.pickerFace+2*v.pickerInset+"px",n.sldM.style.height=n.box.style.height;try{n.sldM.style.cursor="pointer"}catch(e){n.sldM.style.cursor="hand"}n.btn.style.display=v.pickerClosable?"block":"none",n.btn.style.position="absolute",n.btn.style.left=v.pickerFace+"px",n.btn.style.bottom=v.pickerFace+"px",n.btn.style.padding="0 15px",n.btn.style.height="18px",n.btn.style.border=v.pickerInset+"px solid",a=v.pickerInsetColor.split(/\s+/),l=a.length<2?a[0]:a[1]+" "+a[0]+" "+a[0]+" "+a[1],n.btn.style.borderColor=l,n.btn.style.color=v.pickerButtonColor,n.btn.style.font="12px sans-serif",n.btn.style.textAlign="center";var a,l;try{n.btn.style.cursor="pointer"}catch(e){n.btn.style.cursor="hand"}switch(n.btn.onmousedown=function(){v.hidePicker()},n.btnS.style.lineHeight=n.btn.style.height,b){case 0:var d="hs.png";break;case 1:var d="hv.png"}n.padM.style.backgroundImage="url('"+jscolor.getDir()+"cross.gif')",n.padM.style.backgroundRepeat="no-repeat",n.sldM.style.backgroundImage="url('"+jscolor.getDir()+"arrow.gif')",n.sldM.style.backgroundRepeat="no-repeat",n.pad.style.backgroundImage="url('"+jscolor.getDir()+d+"')",n.pad.style.backgroundRepeat="no-repeat",n.pad.style.backgroundPosition="0 0",p(),h(),jscolor.picker.owner=v,jscolor.picker.owner.styleElement.parentNode.appendChild(n.boxB)}(d[e],d[t])}},this.importColor=function(){k?this.adjust?!this.required&&/^\s*$/.test(k.value)?(k.value="",i.style.backgroundImage=i.jscStyle.backgroundImage,i.style.backgroundColor=i.jscStyle.backgroundColor,i.style.color=i.jscStyle.color,this.exportColor(o|n)):this.fromString(k.value)||this.exportColor():this.fromString(k.value,o)||(i.style.backgroundImage=i.jscStyle.backgroundImage,i.style.backgroundColor=i.jscStyle.backgroundColor,i.style.color=i.jscStyle.color,this.exportColor(o|n)):this.exportColor()},this.exportColor=function(e){if(!(e&o)&&k){var t=this.toString();this.caps&&(t=t.toUpperCase()),this.hash&&(t="#"+t),k.value=t}e&n||!i||(i.style.backgroundImage="none",i.style.backgroundColor="#"+this.toString(),i.style.color=.213*this.rgb[0]+.715*this.rgb[1]+.072*this.rgb[2]<.5?"#FFF":"#000"),e&r||!f()||p(),e&s||!f()||h()},this.fromHSV=function(e,t,i,o){null!==e&&(e=Math.max(0,this.minH,Math.min(6,this.maxH,e))),null!==t&&(t=Math.max(0,this.minS,Math.min(1,this.maxS,t))),null!==i&&(i=Math.max(0,this.minV,Math.min(1,this.maxV,i))),this.rgb=d(null===e?this.hsv[0]:this.hsv[0]=e,null===t?this.hsv[1]:this.hsv[1]=t,null===i?this.hsv[2]:this.hsv[2]=i),this.exportColor(o)},this.fromRGB=function(e,t,i,o){null!==e&&(e=Math.max(0,Math.min(1,e))),null!==t&&(t=Math.max(0,Math.min(1,t))),null!==i&&(i=Math.max(0,Math.min(1,i)));var n=function(e,t,i){var o=Math.min(Math.min(e,t),i),n=Math.max(Math.max(e,t),i),r=n-o;if(0===r)return[null,0,n];var s=e===o?3+(i-t)/r:t===o?5+(e-i)/r:1+(t-e)/r;return[6===s?0:s,r/n,n]}(null===e?this.rgb[0]:e,null===t?this.rgb[1]:t,null===i?this.rgb[2]:i);null!==n[0]&&(this.hsv[0]=Math.max(0,this.minH,Math.min(6,this.maxH,n[0]))),0!==n[2]&&(this.hsv[1]=null===n[1]?null:Math.max(0,this.minS,Math.min(1,this.maxS,n[1]))),this.hsv[2]=null===n[2]?null:Math.max(0,this.minV,Math.min(1,this.maxV,n[2]));var r=d(this.hsv[0],this.hsv[1],this.hsv[2]);this.rgb[0]=r[0],this.rgb[1]=r[1],this.rgb[2]=r[2],this.exportColor(o)},this.fromString=function(e,t){var i=e.match(/^\W*([0-9A-F]{3}([0-9A-F]{3})?)\W*$/i);return!!i&&(6===i[1].length?this.fromRGB(parseInt(i[1].substr(0,2),16)/255,parseInt(i[1].substr(2,2),16)/255,parseInt(i[1].substr(4,2),16)/255,t):this.fromRGB(parseInt(i[1].charAt(0)+i[1].charAt(0),16)/255,parseInt(i[1].charAt(1)+i[1].charAt(1),16)/255,parseInt(i[1].charAt(2)+i[1].charAt(2),16)/255,t),!0)},this.toString=function(){return(256|Math.round(255*this.rgb[0])).toString(16).substr(1)+(256|Math.round(255*this.rgb[1])).toString(16).substr(1)+(256|Math.round(255*this.rgb[2])).toString(16).substr(1)};var v=this,b="hvs"===this.pickerMode.toLowerCase()?1:0,y=!1,k=jscolor.fetchElement(this.valueElement),i=jscolor.fetchElement(this.styleElement),w=!1,x=!1,C={},o=1,n=2,r=4,s=8;if(jscolor.addEvent(c,"focus",function(){v.pickerOnfocus&&v.showPicker()}),jscolor.addEvent(c,"blur",function(){y?y=!1:window.setTimeout(function(){y||(k===c&&v.importColor(),v.pickerOnfocus&&v.hidePicker()),y=!1},0)}),k){var a=function(){v.fromString(k.value,o),_()};jscolor.addEvent(k,"keyup",a),jscolor.addEvent(k,"input",a),jscolor.addEvent(k,"blur",function(){k!==c&&v.importColor()}),k.setAttribute("autocomplete","off")}switch(i&&(i.jscStyle={backgroundImage:i.style.backgroundImage,backgroundColor:i.style.backgroundColor,color:i.style.color}),b){case 0:jscolor.requireImage("hs.png");break;case 1:jscolor.requireImage("hv.png")}jscolor.requireImage("cross.gif"),jscolor.requireImage("arrow.gif"),this.importColor()}},getSettings={merge:function(e,t){return Object.assign({},e,t)},trix:function(e){return this.merge(e,{smartyVersion:3,continueComments:"Enter"})},quill:function(e){return this.merge(e,{modules:{toolbar:[["code-block"],[{font:[]}],[{size:["small",!1,"large","huge"]}],["bold","italic","underline","strike"],["blockquote"],[{header:1},{header:2}],[{header:[1,2,3,4,5,6,!1]}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{color:[]},{background:[]}],[{align:[]}],["clean"]]},theme:"snow",placeholder:"Содержимое блока..."})},froala:function(e){return this.merge(e,{language:"ru",toolbarButtons:["fullscreen","bold","italic","underline","strikeThrough","subscript","superscript","|","fontFamily","fontSize","color","inlineStyle","paragraphStyle","|","paragraphFormat","align","formatOL","formatUL","outdent","indent","quote","-","insertLink","insertImage","insertVideo","insertFile","insertTable","|","emoticons","specialCharacters","insertHR","selectAll","clearFormatting","|","print","spellChecker","help","html","|","undo","redo"],pluginsEnabled:null})},Ckeditor5:function(e){return this.merge(e,{})},imperavi:function(e){return this.merge(e,{lang:"ru",plugins:["clips","beyondgrammar","alignment","widget","video","textexpander","table","specialchars","properties","pagebreak","limiter","inlinestyle","imagemanager","handle","fullscreen","fontsize","fontfamily","fontcolor","filemanager","definedlinks","counter"],toolbarFixed:!0,imagePosition:!0,imageResizable:!0,toolbarFixedTopOffset:10,fileUpload:"/api/upload/file",imageUpload:"/api/upload/image",clipboardUploadUrl:"/api/upload/clipboard"})},summernote:function(e){return this.merge(e,{smartyVersion:3,continueComments:"Enter"})},codemirror:function(e){return this.merge(e,{gutters:["note-gutter","CodeMirror-linenumbers"],tabSize:4,indentUnit:4,lineNumbers:!0,lineWrapping:!0,tabMode:"indent",autofocus:!1,smartIndent:!1,enterMode:"keep",smartyVersion:3,continueComments:"Enter"})},tinymce:function(e){return this.merge(e,{selector:"textarea",height:70,theme:"modern",plugins:"searchreplace directionality visualblocks visualchars fullscreen link image media codesample table charmap hr pagebreak nonbreaking anchor insertdatetime advlist lists textcolor wordcount imagetools colorpicker textpattern",toolbar1:"formatselect | bold italic strikethrough forecolor backcolor | link | alignleft aligncenter alignright alignjustify | numlist bullist outdent indent | removeformat",menubar:!1,fullpage:!1,remove_script_host:!1,relative_urls:!1,image_advtab:!0,content_css:["/static/apps/wysiwyg/tinymce/codepen.min.css"]})}},cmp=function(e,t){return"number"==typeof e&&"number"==typeof t?t<e?1:e<t?-1:0:(e=asciifold(String(e||"")),(t=asciifold(String(t||"")))<e?1:e<t?-1:0)},extend=function(e,t){var i,o,n,r;for(i=1,o=arguments.length;i<o;i++)if(r=arguments[i])for(n in r)r.hasOwnProperty(n)&&(e[n]=r[n]);return e},trim=function(e){return(e+"").replace(/^\s+|\s+$|/g,"")},escape_regex=function(e){return(e+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")},is_array=Array.isArray||$&&$.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function declOfNum(e,t){return[e=Math.abs(e),t[4<e%100&&e%100<20?2:[2,0,1,1,1,2][e%10<5?e%10:5]]].join(" ")}function saving(e,t){$.ajax({url:"/"+ADMIN_DIR+"/save/",type:"post",data:{id:e,cont:t,pathname:location.pathname},dataType:"JSON",success:function(e){1==e?alert("Данные удачно сохранены."):alert("Ошибка, данные небыли сохранены.")}})}function isFullScreen(e){return/\bCodeMirror-fullscreen\b/.test(e.getWrapperElement().className)}function winHeight(){return window.innerHeight||(document.documentElement||document.body).clientHeight}function setFullScreen(e,t){var i=e.getWrapperElement(),o=e.getScrollerElement();t?(i.className+=" CodeMirror-fullscreen",o.style.height=winHeight()+"px",document.documentElement.style.overflow="hidden"):(i.className=i.className.replace(" CodeMirror-fullscreen",""),o.style.height="",document.documentElement.style.overflow=""),e.refresh()}!function(e){e.browser={},e.browser.mozilla=/mozilla/.test(navigator.userAgent.toLowerCase())&&!/webkit/.test(navigator.userAgent.toLowerCase()),e.browser.webkit=/webkit/.test(navigator.userAgent.toLowerCase()),e.browser.opera=/opera/.test(navigator.userAgent.toLowerCase()),e.browser.msie=/msie/.test(navigator.userAgent.toLowerCase())}(jQuery);var _editor={inited:[],codemirror:function(e,t){var i=document.getElementById(e);"xml"==t&&(t={name:"xml",alignCDATA:!0}),"sql"==t&&(t="text/x-mariadb",-1<window.location.href.indexOf("mime=")&&(t=window.location.href.substr(window.location.href.indexOf("mime=")+5))),CodeMirror.fromTextArea(i,getSettings.codemirror({mode:t,extraKeys:{"Ctrl-S":function(e){return saving(),!1},"Cmd-S":function(e){return saving(),!1},"Ctrl-Q":"toggleComment","Cmd-Q":"toggleComment"}}))},init:function(e,t,i){void 0!==this[t]&&this.inited.indexOf(e)<0&&(this.inited.push(e),this[t](e,i))}};function _defineProperty(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var d=document,css=function(e,t){for(var i in t)e.style[i]=t[i]},animate=function(t,i){var o=new Date,n=setInterval(function(){var e=(new Date-o)/t.duration;1<e&&(e=1),t.step(e),1==e&&(i&&i.apply(),clearInterval(n))},t.delay||20);return{stop:function(){clearInterval(n)}}},addClass=function(e,t){var i=e.className;-1==i.indexOf(t)&&(""!=i&&(t=" "+t),e.className=i+t)},removeClass=function(e,t){var i=e.className,o=new RegExp("\\s?\\b"+t+"\\b","g");i=i.replace(o,""),e.className=i};function is_string(e){return"string"==typeof e}function is_numeric(e){return!isNaN(parseFloat(e))&&isFinite(e)}var mapConteiner=function(e,t){"google"===e?googleMaps(t):"yandex"===e&&yandexMaps(t)};function checkAll(e){var t=$(e).prop("checked");$(".check-all-spy").prop("checked",t)}function yandexMaps(e){var o={link:null,mapid:"map-conteiner-"+e,place:"krasnodar",type:"yandex#map",city:{krasnodar:[45.09471716593029,39.01589900000001],moscow:[55.76,37.64]},getBaloon:function(e){return new ymaps.Placemark(e,{},{draggable:!0})},draw:function(e){o.link=new e.Map(this.mapid,{center:o.city[this.place],zoom:12,type:o.type}),o.link.controls.add("smallZoomControl",{right:10,top:15}).add(new e.control.ScaleLine).add("searchControl",{left:20,top:20});var t=this.getBaloon(o.city[this.place]);o.link.events.add("click",function(e){o.link.geoObjects.remove(t),t=o.getBaloon(e.get("coordPosition")),o.link.geoObjects.add(t),o.setCoord(e.get("coordPosition"))}),o.link.geoObjects.add(t).events.add("dragend",function(e){var t=e.get("target"),i=t.geometry.getCoordinates();t.properties.set("balloonContent",i),o.setCoord(i)})},add:function(){if(1==arguments.length)o.link.geoObjects.add(new ymaps.GeoObject({geometry:{type:"Point",coordinates:arguments[0]}}));else{for(var e=new ymaps.GeoObjectCollection,t=0;t<arguments.length;t++)e.add(new ymaps.Placemark(arguments[t]));o.link.geoObjects.add(e)}}};ymaps.ready(function(){o.draw(ymaps)})}function googleMaps(e){new google.maps.Map(d.getElementById("map-conteiner-"+e),{zoom:14,zoomControl:!1,panControl:!1,scrollwheel:!1,navigationControl:!1,mapTypeControl:!1,scaleControl:!1,draggable:!0,disableDoubleClickZoom:!0,center:new google.maps.LatLng(45.053548,39.016056)})}var datepicker=function(){var l=this;$(".calendar").each(function(e,t){var i=$(t).closest(".calendar"),o=i.find(".calendar-input"),n=o.is(":disabled"),r=o.data("timestamp")||!1,s=!1!==r?"DD.MM.YYYY":o.data("format")||"DD.MM.YYYY";if(s=s.toLowerCase(),!n){o.prop("date",""),o.data("format",s);var a=o.datepicker({format:s,autoclose:!0,container:i,language:ADMIN_LOCALE});a.on("changeDate",function(e){var t=$(l).data("date");!1!==r&&(t=new Date(t).getTime()/1e3),o.val(a.datepicker("getFormattedDate"))}),i.find(".input-group-addon")&&i.find(".input-group-addon").on("click",function(){a.datepicker("show")})}})};function selectize(e){var t=null;is_string(e=e||"select")?t=$(e):is_object(e)&&(t=e);var i={width:"100%",allow_single_deselect:!0,no_results_text:"Не найдено!",disable_search_threshold:10};t.each(function(){var e=$(this),t=e.attr("placeholder");t&&(e.prop("multiple")?i.placeholder_text_multiple=t:i.placeholder_text_single=t);e.chosen(i)})}function changeRow(e){$(e).prop("checked")?$(e).closest("tr").find("td").addClass("ch"):$(e).closest("tr").find("td").removeClass("ch")}function toggle_small_photo(e){$("#"+e).toggle()}function removeSection(e,t,i,o){if(t.preventDefault(),confirm("Вы действительно хотите удалить?")){i=parseInt(i);var n,r=[],s=$(e).val().split(",");for(n in s)""!==s[n]&&parseInt(s[n])!==i&&r.push(parseInt(s[n]));$(o).remove(),$(e).val(1<r.length?r.join(","):r)}return!1}function slider(e,i,t,o,n,r){var s="#"+e,a=document.getElementById(e);r=r||"horizontal",o=o||0,n=n||100;var l=t,d="lower",c="tap-drag";"range"==i&&(c="tap-drag",d=!0,l=[t[0],t[1]]),noUiSlider.create(a,{step:1,animate:!1,orientation:r,start:l,connect:d,behaviour:c,range:{min:o,max:n},format:wNumb({decimals:0})});var u={range:{0:"min",1:"max"},slider:{0:"value"}};a.noUiSlider.on("update",function(e,t){$(s+"-"+u[i][t]).val(e[t])})}function metaCounter(){$(".count-number").on("keyup",function(){var e=$(this).closest(".count-number-block").find(".count-number-block-count"),t=parseInt(e.data("recomend"))||"";e.html($(this).val().length+(""!==t?"/"+t:"")),""!==t&&$(this).val().length>t?e.addClass("unlim"):e.hasClass("unlim")&&e.removeClass("unlim")})}function seoCrowl(){$("input[name='changefreq']").on("change",function(){"fixed"==$.trim($(this).val())?$("#changefreq_fixed").removeClass("hidden"):$("#changefreq_fixed").addClass("hidden")}),$("input[name='priority']").on("change",function(){"fixed"==$.trim($(this).val())?$("#priority_fixed").removeClass("hidden"):$("#priority_fixed").addClass("hidden")})}function toggle_item(e,t,i,o){e.preventDefault(),$("#"+i).toggle();var n=$(t).find(".zmdi");n.hasClass(o[0])?(n.removeClass(o[0]),n.addClass(o[1])):(n.removeClass(o[1]),n.addClass(o[0]))}function switch_type_fields(e){!0===e.checked?($("#case2").hide(),$("#case2 input").attr({disabled:!0}),$("#case1").show(),$("#case1 input").attr({disabled:!1})):($("#case1").hide(),$("#case1 input").attr({disabled:!0}),$("#case2").show(),$("#case2 input").attr({disabled:!1}))}function show_tr(e){var t=$(e).val();10==t||11==t||12==t?$("#to_list").show():$("#to_list").hide()}function translate_key(e){$(e).val(generatePassword(random(14,24),!1,/\w/))}function secret(e,t){$(e).val(generatePassword(12,!1))}function random(e,t){return e=e||0,t=t||100,Math.floor(Math.random()*(t-e+1))+e}function token(e){e=e||8;var t="",o="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";for(i=1;i<e;i++){var n=Math.floor(Math.random()*o.length+1);t+=o.charAt(n)}return t}function del_list_fields(e){return cp.dialog("Вы дейсвительно хотите удалить поле?")&&$("#tr"+e).remove(),!1}function add_list_fields(){field_counter++,str='<tr id="tr'+field_counter+'">',str+='<td><input type="hidden" name="field_id['+field_counter+']" value="0" />',str+='<input type="text" name="field_name['+field_counter+']" class="bord padd ness" /></td>',str+='<td><input type="text" name="field_sys_name['+field_counter+']" class="bord padd ness" /></td>',str+='<td><select name="field_type['+field_counter+']" class="field_type ness" id="'+field_counter+'" onchange="select_type(this);">',$.each(arr_field_type,function(e,t){1*e&&(str+='<option value="'+e+'">'+t+"</option>")}),str+="</select></td>",str+='<td class="addition"></td>',str+='<td><input type="text" name="f_ord['+field_counter+']" value="'+field_counter+'0" class="bord padd w60px r" /></td>',str+='<td style="text-align:center"><input type="checkbox" name="in_list['+field_counter+']" /></td>',str+='<td class="actions c"><a href="#" class="ctr_a ctr_del margin" title="Удалить" onclick="del_list_fields('+field_counter+');return false;"></a></td>',str+="</tr>",$("#add_btn").before(str)}function add_list_fields_list(){field_counter++;var e=['<tr id="tr'+field_counter+'">',"<td>",'<input type="hidden" name="field_id['+field_counter+']" value="0">','<input name="var['+field_counter+']" placeholder="Например: Краснодарский край">',"</td>",'<td><input name="value['+field_counter+']" placeholder="Например: 23"></td>','<td><label class="controll"><input type="checkbox" class="controll__input" value="'+field_counter+'" name="default['+field_counter+']"><span class="controll__visible controll__visible_checkbox"></span></label></td>','<td><input name="ord['+field_counter+']" value="'+field_counter+'0" class="ord integer reducing-trigger"></td>','<td class="tac"><a href="#" class="icon icon-delete remove-trigger" title="Удалить" onclick="del_list_fields('+field_counter+');return false;"></a></td>',"</tr>"].join("");$("#add_btn").before(e)}function del_fields(e){field_counter--,$("#tr"+e).remove()}function add_fields(){field_counter++;var e="",t="";for(t in arr_field_type)"string"==typeof arr_field_type[t]&&(e+='<option value="'+t+'">'+arr_field_type[t]+"</option>");var i=['<tr id="tr'+field_counter+'">','<td class="va_t"><input name="f_name['+field_counter+']" class="ness"></td>','<td class="va_t"><input name="f_sys_name['+field_counter+']" class="ness"></td>','<td class="va_t"><select name="f_type['+field_counter+']" class="f_type ness" data-placeholder="Тип поля" id="fieldtype_'+field_counter+'" onchange="select_type(this)">',e,"</select></td>",'<td class="addition va_t">'+get_addition("input",field_counter)+"</td>",'<td class="va_t"><input name="f_ord['+field_counter+']" value="'+field_counter+'0"></td>','<td class="va_m tac"><label class="controll controll_single"><input type="checkbox" class="controll__input" value="1" name="f_in_list['+field_counter+']"><span class="controll__visible controll__visible_checkbox"></span></label></td>','<td class="va_m tac"><label class="controll controll_single"><input type="checkbox" class="controll__input" value="1" name="f_index['+field_counter+']"><span class="controll__visible controll__visible_checkbox"></span></label></td>','<td class="va_m tac"><label class="controll controll_single"><input type="checkbox" class="controll__input" value="1" name="f_unique['+field_counter+']"><span class="controll__visible controll__visible_checkbox"></span></label></td>','<td class="tac"><a href="#" class="icon icon-delete remove-trigger" title="Удалить" onclick="del_fields('+field_counter+');return false;"></a></td>',"</tr>"].join("");$("#add_btn").before(i),selectize("#fieldtype_"+field_counter)}function add_fields_list(){field_counter++,str=['<tr id="tr'+field_counter+'">','<td><input name="var['+field_counter+']"></td>','<td><input name="value['+field_counter+']"></td>','<td><input type="checkbox" name="default['+field_counter+']"></td>','<td><input name="ord['+field_counter+']" value="'+field_counter+'0"></td>','<td class="tac"><a href="#" class="icon icon-delete remove-trigger" title="Удалить" onclick="del_fields('+field_counter+');return false;"></a></td>',"</tr>"].join("\n"),$("#add_btn").before(str)}function select_type(e){var t=1*$(e).attr("id").split("_")[1],i=$("#tr"+t+" .addition"),o=get_addition(e.value.split(":")[0],t);$(i).empty().append(o||""),selectize()}function get_addition(e,t){var i=[],o=[];if(0<=["input","cost","int","hidden","document","timestamp","email","list","autocomplete","select","treeselect","float","system","multiselect","datetime"].indexOf(e)&&(o=['<div class="group">','<label class="group__item"><input type="radio" class="group__item__rb" name="f_width['+t+']" value="25"><span class="group__item__style"></span><span class="group__item__text">25%</span></label>','<label class="group__item"><input type="radio" class="group__item__rb" name="f_width['+t+']" value="50"><span class="group__item__style"></span><span class="group__item__text">50%</span></label>','<label class="group__item"><input type="radio" class="group__item__rb" name="f_width['+t+']" value="75"><span class="group__item__style"></span><span class="group__item__text">75%</span></label>','<label class="group__item"><input type="radio" class="group__item__rb" name="f_width['+t+']" value="100" checked><span class="group__item__style"></span><span class="group__item__text">100%</span></label>',"</div>"],0<=["list","autocomplete","select","treeselect","radio","multiselect","checkbox","system"].indexOf(e)&&o.push('<div class="cb mb10"></div>')),"hidden"==e&&o.push('<input value="" name="f_hidden_default['+t+']" placeholder="Значение по умолчанию">'),"system"==e&&o.push('<input value="" name="f_binding['+t+']" placeholder="Например поле (title)">'),"date"==e&&(i=['<div class="help-cover">','<input name="f_date_format['+t+']" value="DD.MM.YYYY" placeholder="Формат даты">','<div class="tooltip tooltip-down">',"D — день,<br>","M — месяц (без нуля впереди)<br>","DD, MM — день и месяц с нулём впереди для значений от 1 до 9<br>","YY — 2-символьное обозначение года<br>","YYYY — 4-символьное обозначение года (год пишется полностью)","</div>","</div>"],o.push(i.join("\n"))),0<=["file","image"].indexOf(e)&&(i=['<div class="option-group option-combo">','<label><input type="radio" name="f_file_count['+t+']" value="0"><span class="option">Один файл</span></label>','<label><input type="radio" name="f_file_count['+t+']" value="1" checked><span class="option">Много файлов</span></label>',"</div>"],"image"==e&&i.push('<div class="cb mb10"></div>'),o.push(i.join("\n"))),0<=["gallery","image"].indexOf(e)&&"undefined"!=typeof CONFIGURE&&void 0!==CONFIGURE.image){var n,r=[],s=[],a="";r=['<div class="js-size-list">','<table class="table-simple">','<col><col><col><col width="57"><col width="20">',"<thead>","<tr>",'<td class="h">Префикс</td>','<td class="h">Ширина</td>','<td class="h">Высота</td>','<td class="h">Метод</td>','<td class="h"></td>',"</tr>","</thead>","<tbody>"],n=template("tpl_image_row",{index:0,button:!0,iteration:t}),s=["</tbody>","</table>",'<a href="#" class="add-size js-add-size" data-iteration="{$smarty.foreach.i.iteration}"><i class="icon icon-plus-square"></i> Добавить размер</a>',"</div>"],o.push(r.join("\n")),o.push(n),o.push(s.join("\n"))}if(0<=["embedded"].indexOf(e)){if(!is_undefined(MODULE_LIST)){var l,d="";for(l in MODULE_LIST)d+='<option value="'+l+'">'+MODULE_LIST[l].name+"</option>"}i=['<div class="j-select-wrapper">','<div class="mb5">','<select name="f_module['+t+']" data-placeholder="Выбрать модуль" class="j-select-choosen">','<option value="0">---</option>',d,"</select>","</div>",'<div class="clearfix j-select-container">','<select name="f_fields['+t+'][]" multiple data-placeholder="Выбрать" disabled></select>',"</div>","</div>"],o.push(i.join("\n"))}if(0<=["list","section","autocomplete","select","treeselect","radio","checkbox","multiselect"].indexOf(e)&&(i=['<div class="cb clearfix">','<label class="controll"><input type="checkbox" class="controll__input" value="1" onchange="switch_types(this)" name="f_use_table_list['+t+']"><span class="controll__visible controll__visible_checkbox"></span><span class="controll__text">привязать к `#__mdd_lists`</span></label>','<div class="case case0">','<input name="f_table_name['+t+']" value="" class="mb5" placeholder="Название таблицы (#_news)">','<input name="f_table_field['+t+']" value="" placeholder="Поле (title)">',"</div>",'<div class="case case1 hidden">','<input name="f_table_list['+t+']" disabled placeholder="BIND списка" value="">',"</div>","</div>"],o.push(i.join("\n"))),0<=["range","slider"].indexOf(e)&&(i=['<div class="-col">','<div class="-left">','<input name="f_range['+t+'][min]" value="" placeholder="Min" class="integer">',"</div>",'<div class="-right">','<input name="f_range['+t+'][max]" value="" placeholder="Max" class="integer">',"</div>","</div>"],o.push(i.join("\n"))),"editor"==e&&"undefined"!=typeof CONFIGURE&&void 0!==CONFIGURE.editor){(i=[]).push('<div class="option-group option-combo">');a="";for(c in CONFIGURE.editor)a="",void 0!==CONFIGURE.editor[c].default&&1==CONFIGURE.editor[c].default&&(a=" checked"),i.push('<label><input type="radio" name="f_editor['+t+']" value="'+CONFIGURE.editor[c].system+'" '+a+'><span class="option">'+CONFIGURE.editor[c].name+"</span></label>");if(i.push("</div>"),"undefined"!=typeof CONFIGURE&&void 0!==CONFIGURE.editor_mode){for(c in i.push('<div class="cb mb10"></div>'),i.push('<div class="option-group">'),CONFIGURE.editor_mode)i.push('<label><input type="radio" name="f_editor_mode['+t+']" value="'+CONFIGURE.editor_mode[c]+'"><span class="option">'+CONFIGURE.editor_mode[c]+"</span></label>");i.push("</div>")}o.push(i.join("\n"))}if("redactor"==e&&"undefined"!=typeof CONFIGURE&&void 0!==CONFIGURE.redactor){(i=[]).push('<div class="group">');var c;a="";for(c in CONFIGURE.redactor)void 0!==CONFIGURE.redactor[c].name&&void 0!==CONFIGURE.redactor[c].system&&(a="",void 0!==CONFIGURE.redactor[c].default&&1==CONFIGURE.redactor[c].default&&(a=" checked"),i.push('<label class="group__item"><input type="radio" class="group__item__rb" name="f_redactor['+t+']" value="'+CONFIGURE.redactor[c].system+'"'+a+'><span class="group__item__style"></span><span class="group__item__text">'+CONFIGURE.redactor[c].name+"</span></label>"));i.push("</div>"),o.push(i.join("\n"))}return o.join("\n")}function switch_types(e){p_obj=$(e).closest("td"),e.checked?($(".case1",p_obj).show(),$(".case1 input",p_obj).attr({disabled:!1}),$(".case0",p_obj).hide(),$(".case0 input",p_obj).attr({disabled:!0})):($(".case0",p_obj).show(),$(".case0 input",p_obj).attr({disabled:!1}),$(".case1",p_obj).hide(),$(".case1 input",p_obj).attr({disabled:!0}))}function humanSize(e){return"number"!=typeof e?"":1e9<=e?(e/1e9).toFixed(2)+" Гб":1e6<=e?(e/1e6).toFixed(2)+" Мб":1024<=e?(e/1e3).toFixed(2)+" Кб":e+" б"}function addExtendet(){$.post("/"+ADMIN_DIR+"/ajax/vote/",{action:$("#action").attr("value"),id:$("#id").attr("value"),title:$("#title").attr("value"),ord:$("#ord").attr("value"),visible:$("#VoteAddQuestions input:radio[name=visible]:checked").val()},function(e){var t;t=1==$("#VoteAddQuestions input:radio[name=visible]:checked").val()?"Да":"Нет";var i='<tr id="tr_'+e+'">';i+="<td>",i+='<input name="parent_id_'+e+'" id="parent_id_'+e+'" value="2" type="hidden">',i+='<input name="id_'+e+'" id="id_'+e+'" value="'+e+'" type="hidden">',i+='<div id="title_'+e+'"><b>'+$("#title").attr("value")+"</b></div>",i+='<div id="title_i_'+e+'" style="display: none;">',i+='<input name="title_'+e+'" value="'+$("#title").attr("value")+'" class="bord padd w100" id="title_input_'+e+'" type="text">',i+='<p align="right">',i+='<a href="javascript:;" onclick="saveExtendet(\''+e+"');\">Сохранить</a> | ",i+='<a href="javascript:;" onclick="cancelExtendet(\''+e+"');\">Отмена</a> ",i+="</p>",i+="</div>",i+="</td>",i+="<td>",i+='<div id="ord_'+e+'"><b>'+$("#ord").attr("value")+"</b></div>",i+='<div id="ord_i_'+e+'" style="display: none;">',i+='<input name="ord_'+e+'" value="'+$("#ord").attr("value")+'" style="width: 100%;" class="bord padd w100" id="ord_input_'+e+'" type="text">',i+="</div>",i+="</td>",i+='<td align="center">',i+='<div id="visible_'+e+'"><b>'+t+"</b></div>",i+='<div id="visible_i_'+e+'" style="display: none;">',i+='<input name="visible_'+e+'" value="1" checked="checked" onclick="$(\'#vis_'+e+"').val('1');\" id=\"visible_input_"+e+'_1" type="radio">Да &nbsp;&nbsp;',i+='<input name="visible_'+e+'" value="0" onclick="$(\'#vis_'+e+"').val('0');\" id=\"visible_input_"+e+'_0" type="radio">Нет',i+='<input name="vis_'+e+'" id="vis_'+e+'" value="" type="hidden">',i+="</div>",i+="</td>",i+="<td>",i+='<a href="#" class="icon icon-edit" onclick="editExtendet(\''+e+"')\"></a>",i+='<a href="#" class="icon icon-delete remove-trigger" onClick="delExtendet(\''+e+"')\"></a>",i+="</td>",i+="</tr>",$(i).insertBefore("#ajax_add_form"),$("#title").attr({value:""}),$("#ord").attr({value:""}),$("#ajax_add_form").hide()})}function saveExtendet(i){$.post("/"+ADMIN_DIR+"/ajax/vote/",{action:"update",id:$("#id_"+i).attr("value"),parent_id:$("#parent_id_"+i).attr("value"),title:$("#title_input_"+i).attr("value"),ord:$("#ord_input_"+i).attr("value"),visible:$("#VoteAddQuestions input:radio[name=visible_"+i+"]:checked").val()},function(e){var t;t=1==$("#vis_"+i).val()?"Да":"Нет";$("#title_"+i).html("<b>"+$("#title_input_"+i).attr("value")+"</b>"),$("#ord_"+i).html($("#ord_input_"+i).attr("value")),$("#visible_"+i).html(t),$("#title_"+i).show(),$("#ord_"+i).show(),$("#visible_"+i).show(),$("#title_i_"+i).hide(),$("#ord_i_"+i).hide(),$("#visible_i_"+i).hide()})}function editExtendet(e){$("#title_"+e).hide(),$("#ord_"+e).hide(),$("#visible_"+e).hide(),$("#title_i_"+e).show(),$("#ord_i_"+e).show(),$("#visible_i_"+e).show()}function delExtendet(e){cp.dialog("Вы действительно хотите удалить запись?")&&$.post("/"+ADMIN_DIR+"/ajax/vote/",{action:"del",id:$("#id_"+e).val()},onAjaxSuccessDel)}function onAjaxSuccessDel(e){$("#tr_"+e).remove()}function cancelExtendet(e){$("#title_"+e).show(),$("#ord_"+e).show(),$("#visible_"+e).show(),$("#title_i_"+e).hide(),$("#ord_i_"+e).hide(),$("#visible_i_"+e).hide()}function onAjaxSuccess(e){alert(e)}function editTitle(t,e){if(void 0===e)e=$("#ftitle_"+t).text();var i=prompt("Введите новое имя",e);return""!=i&&i!=e&&null!==i&&$.ajax({url:"/"+ADMIN_DIR+"/meta/filename",type:"post",data:{id:t,name:i},dataType:"JSON",success:function(e){!0===e.status&&$("#ftitle_"+t).html(i)}}),!1}function editVisible(t,i){return i=1==i?0:1,$.ajax({url:"/"+ADMIN_DIR+"/meta/filevisible",type:"post",data:{id:t,visible:i},dataType:"JSON",success:function(e){!0===e.status&&($("#fvisible_"+t).removeClass("icon-eye icon-eye-off"),1==i?$("#fvisible_"+t).addClass("icon-eye"):$("#fvisible_"+t).addClass("icon-eye-off"))}}),!1}function editOrd(t,e){var i=prompt("Порядок",e);return i&&""!=i&&i!=e&&$.post("/"+ADMIN_DIR+"/ajax/meta/",{action:"newfileord",neword:i,id:t},function(e){1==e&&$("#ordfile_"+t).html(i)}),!1}function ajax_vis_toggle(t,e,i){return $(t).append('<i class="loading"></i>'),$.post("/"+ADMIN_DIR+"/ajax/structure/",{act:"toggle_visible",mod_id:i,id:e},function(e){1==e&&$(t).toggleClass("icon-eye").toggleClass("icon-eye-off").html("")}),!1}function show_tooltips(e){$("#"+e).toggle()}function my_uncheck(){$(".access").each(function(){$(this).attr({checked:""})})}function CheckAndSubmit(e){var t=!0;if($("#"+e+" .ness").each(function(){if(""==$(this).val())return $(this).focus().addClass("error"),t=!1;$(this).removeClass("error")}),!t)return!1;$("#"+e).submit()}function setSort(e,t){value=$(e).val(),setCookie(t,value),location.href=location.href}function form_submit(e,t){"save"==t&&$("#"+e).submit(),$("#"+e).submit()}function openwin(e,t,i,o){null!=hwnd&&hwnd.close(),hwnd=window.open(e,"","toolbar=no , location=no , directories=no , resizable=no , width="+t+" , height="+i),hwnd.document.open(),hwnd.document.write("<html>"),hwnd.document.write("<head>"),hwnd.document.write("<title>"+o+"</title>"),hwnd.document.write("</head>"),hwnd.document.write("<body bgcolor=#ffffff bottommargin=0 leftmargin=0 marginheight=0 marginwidth=0 rightmargin=0 topmargin=0 style='border:0px;'>"),hwnd.document.write("<table align=center width=100% height=100% cellspacing=0 cellpadding=0 border=0>"),hwnd.document.write("<tr><td><img src='"+e+"' border=0></td></tr>"),hwnd.document.write("</table></body></html>"),hwnd.document.close()}function openwin_text(e,t,i){window.open(e,"","toolbar=no , location=no , directories=no , resizable=no , scrollbars=no , width="+t+" , height="+i)}function ltrim(e){for(var t=0;t<e.length&&isWhitespace(e.charAt(t));t++);return e.substring(t,e.length)}function rtrim(e){for(var t=e.length-1;0<=t&&isWhitespace(e.charAt(t));t--);return e.substring(0,t+1)}function trim(e){return ltrim(rtrim(e=e.replace(/\s{2,}/g," ")))}function isWhitespace(e){return-1!=" \t\n\r\f".indexOf(e)}function transliterate(e,t){if(""!=(e=trim(e.toLowerCase()))){var i,o,n,r={},s="";if(_defineProperty(i={"à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","æ":"ae","ç":"c","è":"e","é":"e","ê":"e","ë":"e","ì":"i","í":"i","î":"i","ï":"i","ð":"d","ñ":"n","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ő":"o","ø":"o","ù":"u","ú":"u","û":"u","ü":"u","ű":"u","ý":"y","þ":"th","ÿ":"y","α":"a","β":"b","γ":"g","δ":"d","ε":"e","ζ":"z","η":"h","θ":"8","ι":"i","κ":"k","λ":"l","μ":"m","ν":"n","ξ":"3","ο":"o","π":"p","ρ":"r","σ":"s","τ":"t","υ":"y","φ":"f","χ":"x","ψ":"ps","ω":"w","ά":"a","έ":"e","ί":"i","ό":"o","ύ":"y","ή":"h","ώ":"w","ς":"s","ϊ":"i","ΰ":"y","ϋ":"y","ΐ":"i","ş":"s","ı":"i"},"ç","c"),_defineProperty(i,"ü","u"),_defineProperty(i,"ö","o"),_defineProperty(i,"ğ","g"),_defineProperty(i,"а","a"),_defineProperty(i,"б","b"),_defineProperty(i,"в","v"),_defineProperty(i,"г","g"),_defineProperty(i,"д","d"),_defineProperty(i,"е","e"),_defineProperty(i,"ё","yo"),_defineProperty(i,"ж","zh"),_defineProperty(i,"з","z"),_defineProperty(i,"и","i"),_defineProperty(i,"й","j"),_defineProperty(i,"к","k"),_defineProperty(i,"л","l"),_defineProperty(i,"м","m"),_defineProperty(i,"н","n"),_defineProperty(i,"о","o"),_defineProperty(i,"п","p"),_defineProperty(i,"р","r"),_defineProperty(i,"с","s"),_defineProperty(i,"т","t"),_defineProperty(i,"у","u"),_defineProperty(i,"ф","f"),_defineProperty(i,"х","h"),_defineProperty(i,"ц","c"),_defineProperty(i,"ч","ch"),_defineProperty(i,"ш","sh"),_defineProperty(i,"щ","sch"),_defineProperty(i,"ъ",""),_defineProperty(i,"ы","y"),_defineProperty(i,"ь",""),_defineProperty(i,"э","e"),_defineProperty(i,"ю","yu"),_defineProperty(i,"я","ya"),_defineProperty(i,"є","ye"),_defineProperty(i,"і","i"),_defineProperty(i,"ї","yi"),_defineProperty(i,"ґ","g"),_defineProperty(i,"č","c"),_defineProperty(i,"ď","d"),_defineProperty(i,"ě","e"),_defineProperty(i,"ň","n"),_defineProperty(i,"ř","r"),_defineProperty(i,"š","s"),_defineProperty(i,"ť","t"),_defineProperty(i,"ů","u"),_defineProperty(i,"ž","z"),_defineProperty(i,"ą","a"),_defineProperty(i,"ć","c"),_defineProperty(i,"ę","e"),_defineProperty(i,"ł","l"),_defineProperty(i,"ń","n"),_defineProperty(i,"ó","o"),_defineProperty(i,"ś","s"),_defineProperty(i,"ź","z"),_defineProperty(i,"ż","z"),_defineProperty(i,"ā","a"),_defineProperty(i,"č","c"),_defineProperty(i,"ē","e"),_defineProperty(i,"ģ","g"),_defineProperty(i,"ī","i"),_defineProperty(i,"ķ","k"),_defineProperty(i,"ļ","l"),_defineProperty(i,"ņ","n"),_defineProperty(i,"š","s"),_defineProperty(i,"ū","u"),_defineProperty(i,"ž","z"),r=i,s=e.replace(/[^a-zа-я0-9]/gi,"-"),"cyrillic"==t)s=encodeURI(unescape(unescape(s)));else if("translate"==t)for(n in r)s=s.replace(RegExp(n,"g"),r[n]);else for(n in r)s=s.replace(RegExp(n,"g"),r[n]);"-"==(o=s.split(""))[0]&&(s=s.slice(1)),"-"==o[o.length-1]&&(s=s.slice(0,-1)),e=s}return redouble(e)}function binding(e,t){$("body").on("keyup blur keypress",'input[name="'+e+'"]',function(){if(""!==this.value){var e=$('input[name="'+t+'"]');e.prop("readonly")||e.val(transliterate(this.value,URL_TRANSLATE))}})}function redouble(e){return-1<(e=(e=(e=e.replace("__","_")).replace("_-_","_")).replace("--","-")).indexOf("__")?redouble(e):("_"==e.substr(0,1)&&1<e.length&&(e=e.substr(1,e.length)),e)}function ajax_toggle_group(t,e){var i=0;return i=$(t).hasClass("icon-eye-off")?1:0,$(t).append('<i class="loading"></i>'),$.post("/"+ADMIN_DIR+"/ajax/modules/",{action:"devisible",id:e,visible:i},function(e){1==e&&($(t).hasClass("icon-eye-off")?$(t).removeClass("icon-eye-off").addClass("icon-eye").html(""):$(t).removeClass("icon-eye").addClass("icon-eye-off").html(""))}),!1}function toggle_menu(e,t){$(e).toggleClass("minus").toggleClass("plus").parent(),$("#item"+t).toggle()}function toggle_small_photo(e){$("#"+e).toggle()}function hideField(e){title=$("#docs_"+e+" .title_in").val(),ord=$("#docs_"+e+" .ord_in").val(),$("#docs_"+e+" .title_f").empty().append(title),$("#docs_"+e+" .ord_f").empty().append(ord),$("#docs_"+e+" .but_save").hide(),$("#docs_"+e+" .ctr_edit").show()}function EditDocs(e){return $("#docs_"+e+" .but_save").show(),$("#docs_"+e+" .ctr_edit").hide(),curr_value=$("#docs_"+e+" .title_f").text(),$("#docs_"+e+" .title_f").empty().append("<input type='text' value='"+curr_value+"' name='title' class='bord padd w100 title_in' />"),curr_value=$("#docs_"+e+" .ord_f").text(),$("#docs_"+e+" .ord_f").empty().append("<input type='text' value='"+curr_value+"' name='ord' class='bord padd w20 ord_in' />"),$("#docs_"+e+" .title_in").focus(),!1}function SaveDocs(t){return title=$("#docs_"+t+" .title_in").val(),ord=$("#docs_"+t+" .ord_in").val(),title||(alert("Пустое имя документа"),hideField(t)),$.post("/"+ADMIN_DIR+"/ajax/document/",{id:"document_edit",docsid:t,title:title,ord:ord},function(e){alert("Данные обновлены"),hideField(t)}),!1}function DelDocs(t){return cp.dialog("Вы действительно хотите удалить?")&&$.post("/"+ADMIN_DIR+"/ajax/document/",{id:"document_del",docsid:t},function(e){0<e?$("#docs_"+t).hide():alert("ошибка обновления")}),!1}function page_update(item_id){return $.post("/"+ADMIN_DIR+"/ajax/document/",{id:"update",post_id:item_id},function(data){var json=eval("("+data+")");parseMsg(json,"file_docs")}),!1}function parseMsg(e,i){$("#"+i+" .uploadfiles").empty(),$("#"+i+" input:file").attr({value:""}),str='<table style="margin-bottom:10px;width:80%"><tr>\n<td class="h w100">Документ</td>\n<td class="h">Размер</td>\n<td class="h">Удалить</td></tr>\n';var o=0;$.each(e,function(e,t){odd=o%2!=0?"odd ":"",str+='<tr>\n<td class="'+odd+'"><a href="'+t.sys_name+'" title="" target="_blank">'+t.title+"</a></td>\n",str+='<td class="'+odd+'r"> '+t.size+"</td>\n",str+='<td class="actions"><a href="#" onclick="return Module.ajaxFileDelete('+t.id+",'"+i+'\');" class="ctr_a ctr_del margin" title="Удалить" onclick="return confirm(\'Вы действительно хотите удалить?\')"></a></td>\n</tr>\n',o++}),str+="</table>",$("#"+i+" .uploadfiles").append(str)}function ajaxFileDocsUpload(e){}function screening(e){return e.replace(/"/g,"&quot;")}!function(u,p,h,e){var o="ontouchstart"in h,f=function(){var e=h.createElement("div"),t=h.documentElement;if(!("pointerEvents"in e.style))return!1;e.style.pointerEvents="auto",e.style.pointerEvents="x",t.appendChild(e);var i=p.getComputedStyle&&"auto"===p.getComputedStyle(e,"").pointerEvents;return t.removeChild(e),!!i}(),i={listNodeName:"ol",itemNodeName:"li",rootClass:"dd",listClass:"dd-list",itemClass:"dd-item",dragClass:"dd-dragel",handleClass:"dd-handle",collapsedClass:"dd-collapsed",placeClass:"dd-placeholder",noDragClass:"dd-nodrag",emptyClass:"dd-empty",expandBtnHTML:'<button data-action="expand" type="button" class="dd-button dd-button__expand"></button>',collapseBtnHTML:'<button data-action="collapse" type="button" class="dd-button dd-button__collapse"></button>',group:0,maxDepth:5,threshold:20,dragStop:null,afterExpand:null,afterCollapse:null};function n(e,t){this.w=u(h),this.el=u(e),this.options=u.extend({},i,t),this.init()}n.prototype={init:function(){var n=this;n.reset(),n.el.data("nestable-group",this.options.group),n.placeEl=u('<div class="'+n.options.placeClass+'"/>'),u.each(this.el.find(n.options.itemNodeName),function(e,t){n.setParent(u(t))}),n.el.on("click","button",function(e){if(!n.dragEl){var t=u(e.currentTarget),i=t.data("action"),o=t.parent(n.options.itemNodeName);"collapse"===i&&n.collapseItem(o),"expand"===i&&n.expandItem(o)}});var e=function(e){var t=u(e.target);if(!t.hasClass(n.options.handleClass)){if(t.closest("."+n.options.noDragClass).length)return;t=t.closest("."+n.options.handleClass)}t.length&&!n.dragEl&&(n.isTouch=/^touch/.test(e.type),n.isTouch&&1!==e.touches.length||(e.preventDefault(),n.dragStart(e.touches?e.touches[0]:e)))},t=function(e){n.dragEl&&(e.preventDefault(),n.dragMove(e.touches?e.touches[0]:e))},i=function(e){n.dragEl&&(e.preventDefault(),n.dragStop(e.touches?e.touches[0]:e))};o&&(n.el[0].addEventListener("touchstart",e,!1),p.addEventListener("touchmove",t,!1),p.addEventListener("touchend",i,!1),p.addEventListener("touchcancel",i,!1)),n.el.on("mousedown",e),n.w.on("mousemove",t),n.w.on("mouseup",i)},serialize:function(){var r=this;return step=function(i){function e(e,t){return i.apply(this,arguments)}return e.toString=function(){return i.toString()},e}(function(e,o){var n=[];return e.children(r.options.itemNodeName).each(function(){var e=u(this),t=u.extend({},e.data()),i=e.children(r.options.listNodeName);i.length&&(t.children=step(i,o+1)),n.push(t)}),n}),step(r.el.find(r.options.listNodeName).first(),0)},serialise:function(){return this.serialize()},reset:function(){this.mouse={offsetX:0,offsetY:0,startX:0,startY:0,lastX:0,lastY:0,nowX:0,nowY:0,distX:0,distY:0,dirAx:0,dirX:0,dirY:0,lastDirX:0,lastDirY:0,distAxX:0,distAxY:0},this.isTouch=!1,this.moving=!1,this.dragEl=null,this.dragRootEl=null,this.dragDepth=0,this.hasNewRoot=!1,this.pointEl=null},expandItem:function(e){e.removeClass(this.options.collapsedClass),e.children('[data-action="expand"]').hide(),e.children('[data-action="collapse"]').show(),e.children(this.options.listNodeName).show(),"function"==typeof this.options.afterExpand&&this.options.afterExpand(e)},collapseItem:function(e){e.children(this.options.listNodeName).length&&(e.addClass(this.options.collapsedClass),e.children('[data-action="collapse"]').hide(),e.children('[data-action="expand"]').show(),e.children(this.options.listNodeName).hide()),"function"==typeof this.options.afterCollapse&&this.options.afterCollapse(e)},expandAll:function(){var e=this;e.el.find(e.options.itemNodeName).each(function(){e.expandItem(u(this))})},collapseAll:function(){var e=this;e.el.find(e.options.itemNodeName).each(function(){e.collapseItem(u(this))})},setParent:function(e){e.children(this.options.listNodeName).length&&(e.find(".dd-button__expand").length||e.prepend(u(this.options.expandBtnHTML)),e.find(".dd-button__collapse").length||e.prepend(u(this.options.collapseBtnHTML))),u(e[0]).hasClass("dd-collapsed")?e.children('[data-action="collapse"]').hide():e.children('[data-action="expand"]').hide()},unsetParent:function(e){e.removeClass(this.options.collapsedClass),e.children("[data-action]").remove(),e.children(this.options.listNodeName).remove()},dragStart:function(e){var t=this.mouse,i=u(e.target),o=i.closest(this.options.itemNodeName);this.placeEl.css("height",o.height()),t.offsetX=void 0!==e.offsetX?e.offsetX:e.pageX-i.offset().left,t.offsetY=void 0!==e.offsetY?e.offsetY:e.pageY-i.offset().top,t.startX=t.lastX=e.pageX,t.startY=t.lastY=e.pageY,this.dragRootEl=this.el,this.dragEl=u(h.createElement(this.options.listNodeName)).addClass(this.options.listClass+" "+this.options.dragClass),this.dragEl.css("width",o.width()),o.after(this.placeEl),o[0].parentNode.removeChild(o[0]),o.appendTo(this.dragEl),u(h.body).append(this.dragEl),this.dragEl.css({left:e.pageX-t.offsetX,top:e.pageY-t.offsetY});var n,r,s=this.dragEl.find(this.options.itemNodeName);for(n=0;n<s.length;n++)(r=u(s[n]).parents(this.options.listNodeName).length)>this.dragDepth&&(this.dragDepth=r)},dragStop:function(e){var t=this.dragEl.children(this.options.itemNodeName).first();t[0].parentNode.removeChild(t[0]),this.placeEl.replaceWith(t),this.dragEl.remove(),this.el.trigger("change"),this.hasNewRoot&&this.dragRootEl.trigger("change"),this.reset(),"function"==typeof this.options.dragStop&&this.options.dragStop(t)},dragMove:function(e){var t,i,o,n=this.options,r=this.mouse;this.dragEl.css({left:e.pageX-r.offsetX,top:e.pageY-r.offsetY}),r.lastX=r.nowX,r.lastY=r.nowY,r.nowX=e.pageX,r.nowY=e.pageY,r.distX=r.nowX-r.lastX,r.distY=r.nowY-r.lastY,r.lastDirX=r.dirX,r.lastDirY=r.dirY,r.dirX=0===r.distX?0:0<r.distX?1:-1,r.dirY=0===r.distY?0:0<r.distY?1:-1;var s=Math.abs(r.distX)>Math.abs(r.distY)?1:0;if(!r.moving)return r.dirAx=s,void(r.moving=!0);r.dirAx!==s?(r.distAxX=0,r.distAxY=0):(r.distAxX+=Math.abs(r.distX),0!==r.dirX&&r.dirX!==r.lastDirX&&(r.distAxX=0),r.distAxY+=Math.abs(r.distY),0!==r.dirY&&r.dirY!==r.lastDirY&&(r.distAxY=0)),r.dirAx=s,r.dirAx&&r.distAxX>=n.threshold&&(r.distAxX=0,o=this.placeEl.prev(n.itemNodeName),0<r.distX&&o.length&&!o.hasClass(n.collapsedClass)&&(t=o.find(n.listNodeName).last(),this.placeEl.parents(n.listNodeName).length+this.dragDepth<=n.maxDepth&&(t.length?(t=o.children(n.listNodeName).last()).append(this.placeEl):((t=u("<"+n.listNodeName+"/>").addClass(n.listClass)).append(this.placeEl),o.append(t),this.setParent(o)))),r.distX<0&&(this.placeEl.next(n.itemNodeName).length||(i=this.placeEl.parent(),this.placeEl.closest(n.itemNodeName).after(this.placeEl),i.children().length||this.unsetParent(i.parent()))));var a=!1;if(f||(this.dragEl[0].style.visibility="hidden"),this.pointEl=u(h.elementFromPoint(e.pageX-h.body.scrollLeft,e.pageY-(p.pageYOffset||h.documentElement.scrollTop))),f||(this.dragEl[0].style.visibility="visible"),this.pointEl.hasClass(n.handleClass)&&(this.pointEl=this.pointEl.parent(n.itemNodeName)),this.pointEl.hasClass(n.emptyClass))a=!0;else if(!this.pointEl.length||!this.pointEl.hasClass(n.itemClass))return;var l=this.pointEl.closest("."+n.rootClass),d=this.dragRootEl.data("nestable-id")!==l.data("nestable-id");if(!r.dirAx||d||a){if(d&&n.group!==l.data("nestable-group"))return;if(this.dragDepth-1+this.pointEl.parents(n.listNodeName).length>n.maxDepth)return;var c=e.pageY<this.pointEl.offset().top+this.pointEl.height()/2;i=this.placeEl.parent(),a?((t=u(h.createElement(n.listNodeName)).addClass(n.listClass)).append(this.placeEl),this.pointEl.replaceWith(t)):c?this.pointEl.before(this.placeEl):this.pointEl.after(this.placeEl),i.children().length||this.unsetParent(i.parent()),this.dragRootEl.find(n.itemNodeName).length||this.dragRootEl.append('<div class="'+n.emptyClass+'"/>'),d&&(this.dragRootEl=l,this.hasNewRoot=this.el[0]!==this.dragRootEl[0])}}},u.fn.nestable=function(t){var i=this;return this.each(function(){var e=u(this).data("nestable");e?"string"==typeof t&&"function"==typeof e[t]&&(i=e[t]()):(u(this).data("nestable",new n(this,t)),u(this).data("nestable-id",(new Date).getTime()))}),i||this}}(window.jQuery||window.Zepto,window,document),Array.prototype.max=function(){return Math.max.apply(null,this)},Array.prototype.min=function(){return Math.min.apply(null,this)};var _redactor={inited:[],imperavi:function(e){$R("#"+e,getSettings.imperavi({styles:!0}))},quill:function(e){var t=$("#"+e+"-container").get(0),i=new Quill(t,getSettings.quill());i.on("text-change",function(){$("#"+e).val(i.root.innerHTML)})},tinymce:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(e){tinymce.init(getSettings.tinymce({selector:"#"+e}))}),cleditor:function(e){$("#"+e).cleditor()},froala:function(e){$("#"+e).froalaEditor(getSettings.tinymce({heightMin:200}))},summernote:function(e){$("#"+e).summernote({height:200,tabsize:2,toolbar:!0,codemirror:{theme:"monokai"}})},ckeditor5:function(e){ClassicEditor.create(document.querySelector("#"+e),{toolbar:["heading","|","bold","italic","link","|","bulletedList","numberedList","blockQuote"],alignment:{toolbar:["alignment:left","alignment:right","alignment:center","alignment:justify"],options:["left","right","center","justify"]},fontSize:{options:["tiny","small","default","big","huge"]},highlight:{options:[{model:"yellowMarker",class:"marker-yellow",title:"Yellow marker",color:"var(--ck-highlight-marker-yellow)",type:"marker"},{model:"greenMarker",class:"marker-green",title:"Green marker",color:"var(--ck-highlight-marker-green)",type:"marker"},{model:"pinkMarker",class:"marker-pink",title:"Pink marker",color:"var(--ck-highlight-marker-pink)",type:"marker"},{model:"blueMarker",class:"marker-blue",title:"Blue marker",color:"var(--ck-highlight-marker-blue)",type:"marker"},{model:"redPen",class:"pen-red",title:"Red pen",color:"var(--ck-highlight-pen-red)",type:"pen"},{model:"greenPen",class:"pen-green",title:"Green pen",color:"var(--ck-highlight-pen-green)",type:"pen"}]},image:{toolbar:["imageStyle:full","imageStyle:side","|","imageTextAlternative"],styles:[{name:"left",icon:"left"},{name:"center",icon:"center"},{name:"right",icon:"right"},{name:"fullSize",title:"Full size",icon:"right",isDefault:!0},{name:"side",icon:"left",title:"My side style",class:"custom-side-image"}]},ckfinder:{uploadUrl:"/ckfinder/core/connector/php/connector.php?command=QuickUpload&type=Files&responseType=json"}}).catch(function(e){})},ckeditor:function(e){CKEDITOR.config.width="auto",CKEDITOR.config.height=600,CKEDITOR.disableAutoInline=!0,CKEDITOR.replace(e,{customConfig:"/static/apps/wysiwyg/ckeditor/config.js"})},wysiwyg:function(e){$("#"+e).wysiwyg({toolbar:"top",hotKeys:{"ctrl+b meta+b":"bold","ctrl+i meta+i":"italic","ctrl+u meta+u":"underline","ctrl+z meta+z":"undo","ctrl+y meta+y meta+shift+z":"redo"}})},init:function(e,t){void 0!==this[t]&&this.inited.indexOf(e)<0&&(this.inited.push(e),this[t](e))}};!function(o){o.fn.timeoutClass=function(e,t){t=t||10;var i=this;setTimeout(function(){o(i).toggleClass(e)},t)}}(jQuery);var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function _addslashes(e){return e.replace("/([\"'])/g","\\$1").replace("/\0/g","\\0")}function _stripslashes(e){return e.replace("/\0/g","0").replace("/(.)/g","$1")}function clearCookie(){var e=new Date,t=new Date(e.getTime()-864e5);this.setCookie("co"+this.obj,"cookieValue",t),this.setCookie("cs"+this.obj,"cookieValue",t)}function setCookie(e,t,i,o,n,r){document.cookie=escape(e)+"="+escape(t)+(i?"; expires="+i.toGMTString():"")+(o?"; path="+o:"")+(n?"; domain="+n:"")+(r?"; secure":"")}function getCookie(e){var t="",i=document.cookie.indexOf(escape(e)+"=");if(-1!=i){var o=i+(escape(e)+"=").length,n=document.cookie.indexOf(";",o);t=-1!=n?unescape(document.cookie.substring(o,n)):unescape(document.cookie.substring(o))}return t}function __debug(e,t){var i="";t||(t=0);for(var o="",n=0;n<t+1;n++)o+="    ";if("object"==(void 0===e?"undefined":_typeof(e)))for(var r in e){var s=e[r];"object"==(void 0===s?"undefined":_typeof(s))?(i+=o+"'"+r+"' ...\n",i+=dump(s,t+1)):i+=o+"'"+r+"' => \""+s+'"\n'}else i="===>"+e+"<===("+(void 0===e?"undefined":_typeof(e))+")";return i}function serialize(e){var t,i,o="",n=0,r=function(e){var t,i,o,n,r=void 0===e?"undefined":_typeof(e);if("object"===r&&!e)return"null";if("object"===r){if(!e.constructor)return"object";for(i in(t=(o=e.constructor.toString()).match(/(\w+)\(/))&&(o=t[1].toLowerCase()),n=["boolean","number","string","array"])if(o===n[i]){r=n[i];break}}return r},s=r(e);switch(s){case"function":t="";break;case"boolean":t="b:"+(e?"1":"0");break;case"number":t=(Math.round(e)===e?"i":"d")+":"+e;break;case"string":t="s:"+function(e){var t=0,i=0,o=e.length,n="";for(i=0;i<o;i++)t+=(n=e.charCodeAt(i))<128?1:n<2048?2:3;return t}(e)+':"'+e+'"';break;case"array":case"object":for(i in t="a",e)if(e.hasOwnProperty(i)){if("function"===r(e[i]))continue;o+=serialize(i.match(/^[0-9]+$/)?parseInt(i,10):i)+serialize(e[i]),n++}t+=":"+n+":{"+o+"}";break;case"undefined":default:t="N"}return"object"!==s&&"array"!==s&&(t+=";"),t}function unserialize(e){var n="undefined"!=typeof window?window:global,s=function(e){for(var t=e.length,i=e.length-1;0<=i;i--){var o=e.charCodeAt(i);127<o&&o<=2047?t++:2047<o&&o<=65535&&(t+=2),56320<=o&&o<=57343&&i--}return t-1},x=function(e,t,i,o){throw new n[e](t,i,o)},C=function(e,t,i){for(var o=2,n=[],r=e.slice(t,t+1);r!==i;)o+t>e.length&&x("Error","Invalid"),n.push(r),r=e.slice(t+(o-1),t+o),o+=1;return[n.length,n.join("")]},j=function(e,t,i){var o,n,r;for(r=[],o=0;o<i;o++)n=e.slice(t+(o-1),t+o),r.push(n),i-=s(n);return[r.length,r.join("")]};return function e(t,i){var o,n,r,s,a,l,d,c,u,p,h,f,m,g,_,v,b,y,k=0,w=function(e){return e};switch(i||(i=0),n=i+2,o=t.slice(i,i+1).toLowerCase()){case"i":w=function(e){return parseInt(e,10)},k=(u=C(t,n,";"))[0],c=u[1],n+=k+1;break;case"b":w=function(e){return 0!==parseInt(e,10)},k=(u=C(t,n,";"))[0],c=u[1],n+=k+1;break;case"d":w=function(e){return parseFloat(e)},k=(u=C(t,n,";"))[0],c=u[1],n+=k+1;break;case"n":c=null;break;case"s":k=(p=C(t,n,":"))[0],h=p[1],k=(u=j(t,(n+=k+2)+1,parseInt(h,10)))[0],c=u[1],n+=k+2,k!==parseInt(h,10)&&k!==c.length&&x("SyntaxError","String length mismatch");break;case"a":for(c={},k=(r=C(t,n,":"))[0],s=r[1],n+=k+2,l=parseInt(s,10),a=!0,f=0;f<l;f++)_=(g=e(t,n))[1],m=g[2],b=(v=e(t,n+=_))[1],y=v[2],n+=b,m!==f&&(a=!1),c[m]=y;if(a){for(d=new Array(l),f=0;f<l;f++)d[f]=c[f];c=d}n+=1;break;default:x("SyntaxError","Unknown / Unhandled data type(s): "+o)}return[o,n-i,w(c)]}(e+"",0)[2]}